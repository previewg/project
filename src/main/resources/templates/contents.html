<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/1.4.6/tailwind.css">
    <link rel="stylesheet" href="../css/tailwind.css">
    <!--Google_Font-->
    <link rel="stylesheet" href="../css/font.css"/>
</head>
<body>
<nav class="flex h-20 items-center w-full border-b z-10 top-0">
    <div class="flex-grow flex justify-center">
        <a href="/" class="text-4xl font-bold change">SNAPBIT</a>

    </div>
    <div
            class="justify-around flex-grow flex justify-between change text-lg">
        <a class="hover:font-bold hover:scale-110 transition duration-300 ease-in-out transform hover:-translate-y-1"
           href="/">Home</a> <a
            class="hover:font-bold hover:scale-110 transition duration-300 ease-in-out transform hover:-translate-y-1"
            href="/contents">Contents</a> <a
            class="hover:font-bold hover:scale-110 transition duration-300 ease-in-out transform hover:-translate-y-1"
            href="/news">News</a> <a
            class="hover:font-bold hover:scale-110 transition duration-300 ease-in-out transform hover:-translate-y-1"
            href="/board">Board</a>
    </div>
    <div class="flex-grow flex justify-center transform"
         th:if="${session.user_info} == null">
        <form method="get" action="/signIn">
            <ul>
                <button
                        class="flex border rounded-lg w-24 text-xl focus:outline-none justify-center p-1 hover:scale-110 change">
                    Signin
                </button>
            </ul>
        </form>
    </div>
    <div class="flex-grow flex justify-center transform"
         th:if="${session.user_info} != null">
        <form id="signOut">
            <ul class="flex">
                <div class="flex items-center">
                    <a href="/userInfo">
                        <img src="../img/userIcon.svg"
                             class="h-8 w-8 mr-3 transform hover:scale-110 duration-300 ease-in-out">
                    </a>
                    <p th:text="|${session.user_info.nickname}님|" class="text-lg mr-5"></p>
                    <button
                            class="flex border rounded-lg w-24 text-xl focus:outline-none justify-center p-1 hover:scale-110 change">
                        Signout
                    </button>
                </div>
            </ul>
        </form>
    </div>
</nav>


<section
        style="background-image: url(../img/bitcoin2.jpg); height: 350px"
        class="w-full flex flex-col items-center justify-center">
    <div style="background-color: rgba(0, 0, 0, 0.3); height: 350px"
         class="w-full absolute"></div>
    <div
            class="border-t-2 border-b-2 text-white flex-col flex items-center text-lg z-10"
            style="width: 340px">
        <p class="mt-2">SNAPBIT의 핵심가치는</p>
        <p class="mb-2">모든 고객이 만족할 수 있는 서비스 입니다</p>
    </div>
</section>


<div class="main" style="font-size:larger;" >
    <div class="flex flex-col items-start justify-around mt-24 text-center w-1/3 ml-48 " >
        <h1 class="font-bold text-3xl text-gray-900"> What is Blockchain? </h1>
        <p>조회수가 가장 높은 순 으로 유튜브동영상 시청합니다.</p>
    </div>
    <!-- action="/about/search" method="GET" -->
    <form class="w-3/5 flex mt-20 justify-end h-16 text-lg items-center mb-6">
        <input id="search" type="text" name="" placeholder="검색어를 입력해주세요."
               value="" class="border-b py-1 px-4 focus:outline-none mr-4">

        <button id="search__button" type="button"
                class="ml-1 focus:outline-none text-gray-800 flex items-center">
            <img src="../img/search.svg" class="h-4 w-4 mr-1">
        </button>
    </form>
</div>


<div id="before" class="container mx-auto p-8 ">
    <div div id="youtube1" class="flex flex-row pl-4 flex-wrap -mx-2 justify-around">

    </div>
</div>
<div id="after" class="container mx-auto p-8 " >
    <div div id="youtube2" class="flex flex-row flex-wrap -mx-2 justify-around">
    </div>
</div>

<footer class="h-40 flex justify-around" th:replace="common/footer"></footer>
<script src='https://code.jquery.com/jquery-3.5.1.min.js'></script>
<script>

    $.ajax({
        url: 'https://www.googleapis.com/youtube/v3/search?part=snippet&key=AIzaSyBlT8QAcxDfx_33PbFMuAZSmaELNaOR9yU&maxResults=9&order=viewCount',
        data: {
            'q': '블록체인'
        },
        success: function (res) {
            var items = res.items;
            var html = '';
            for (var i = 0; i < 9; i++) {
                var item = items[i];
                var title = item.snippet;
                // var img = item.snippet.thumbnails.default.url;

                var videoId = item.id.videoId;
                html += `<div class="justify-end flex" style="margin-bottom:100px">\
                       <iframe id="player" type="text/html" width="384" height="216"\
                       src="http://www.youtube.com/embed/${videoId}"\
                       allowfullscreen="true"\
                       frameborder="0"></iframe>\
                       </div>`;
            }
            $('#youtube1').html(html);

        }

    });
    $("#search__button").on("click", function () {
        $("#youtube2").empty();
        let search = $("#search").val();

        $.ajax({
            url: 'https://www.googleapis.com/youtube/v3/search?part=snippet&key=AIzaSyBlT8QAcxDfx_33PbFMuAZSmaELNaOR9yU&maxResults=9&order=viewCount',
            data: {
                'q': search
            },
            success: function (res) {
                $('#before').hide();
                var items = res.items;
                var html = '';
                for (var i = 0; i < 9; i++) {
                    var item = items[i];
                    var title = item.snippet;
                    // var img = item.snippet.thumbnails.default.url;
                    var videoId = item.id.videoId;



                    var videoId = item.id.videoId;
                    html += `<div style="width:33%;margin-bottom:100px">\
                           <iframe id="player" type="text/html" width="384" height="216"\
                           src="http://www.youtube.com/embed/${videoId}"\
                           allowfullscreen="true"\
                           frameborder="0"></iframe>\
                           </div>`;

                }

                $('#youtube2').html(html);
            }
        });
    });
</script>
</body>
</html>